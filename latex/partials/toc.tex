
% For issuing \makecvtitle more than once
\patchcmd{\makecvtitle}{\newlength{\makecvtitledetailswidth}}{\let\makecvtitledetailswidth\relax\newlength{\makecvtitledetailswidth}}{}{}
\patchcmd{\makecvtitle}{\newlength{\makecvtitlepicturewidth}}{\let\makecvtitlepicturewidth\relax\newlength{\makecvtitlepicturewidth}}{}{}

\newcommand{\part}[1]{%
% \phantomsection%
\addcontentsline{toc}{part}{#1}%
}

\makeatletter
\newcommand\@pnumwidth{1.55em}
\newcommand\@tocrmarg{2.55em}
\newcommand\@dotsep{8}
\newcommand\contentsname{Contents}
\setlength\columnsep{20pt}
\setcounter{tocdepth}{0}
\newcommand\tableofcontents{%
  \addtocontents{toc}{\protect\setcounter{tocdepth}{0}}
  \newbox{\makecvtitlenamebox}
  \savebox{\makecvtitlenamebox}{%
    \namestyle{\@firstname\ \@lastname}%
  }
      % \usebox{\makecvtitlenamebox}%
      % \par\nobreak % don't break a page here
      % \kern\the\prevdepth % don't take into account the depth of the preceding line
      % \kern 4pt % space before the rule
  % {   \color{gray!50}\hrule height 0.4ex width \textwidth } %1.05\wd\makecvtitlenamebox} % the rule
      % \kern 0.75em % space after the rule
      % \nointerlineskip % no additional space after the rule\hrule height 1ex width \wd\makecvtitlenamebox %
      % \ifthenelse{\equal{\@title}{}}{}{\titlestyle{\@title}}%
  % \vspace*{2\baselineskip}
  \section*{\contentsname}
  %\addtocontents{toc}{\protect\setcounter{tocdepth}{2}}
  \@starttoc{toc}%
}
\usepackage{titletoc}
\titlecontents*{section}[0pt]
  {}{}{\textbullet}
  {\ \thecontentspage}[\\][]
\titlecontents{part}[0pt]
  {}{}{
    % \hspace*{5em}\normalsize
  }
  {\leaders\hbox{\normalfont$\m@th\mkern \@dotsep mu\hbox{.}\mkern \@dotsep mu$}\hfill\normalsize\thecontentspage
  % \hspace*{2em}
  }[]
\renewcommand\l@subsection[2]{}
\makeatother